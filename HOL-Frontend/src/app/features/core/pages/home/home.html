<div class="min-h-screen bg-gray-50 dark:bg-gray-900 p-6">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">
      ๐ ูุฑุญุจุงู {{ currentUser?.fullName || currentUser?.username }}
    </h1>
    <p class="text-gray-600 dark:text-gray-400">
      {{ authService.isAdmin() ? 'ููุญุฉ ุชุญูู ุงููุฏูุฑ' : authService.isSupervisor() ? 'ููุญุฉ ุชุญูู ุงููุดุฑู' : 'ููุญุฉ ุงูุชุญูู
      ุงูุดุฎุตูุฉ' }}
    </p>
  </div>

  <!-- Employee Dashboard -->
  <div *ngIf="authService.isEmployee() && !authService.isSupervisor() && !authService.isAdmin()">
    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <!-- Today's Tasks -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex items-center justify-between mb-4">
          <div class="p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg">
            <i class="pi pi-calendar text-2xl text-blue-600 dark:text-blue-400"></i>
          </div>
          <span class="text-3xl font-bold text-gray-900 dark:text-white">{{ dashboardStats.todayTasks }}</span>
        </div>
        <h3 class="text-sm font-medium text-gray-600 dark:text-gray-400">ููุงู ุงูููู</h3>
      </div>

      <!-- Pending Tasks -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex items-center justify-between mb-4">
          <div class="p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg">
            <i class="pi pi-clock text-2xl text-orange-600 dark:text-orange-400"></i>
          </div>
          <span class="text-3xl font-bold text-gray-900 dark:text-white">{{ dashboardStats.pendingTasks }}</span>
        </div>
        <h3 class="text-sm font-medium text-gray-600 dark:text-gray-400">ููุฏ ุงูุงูุชุธุงุฑ</h3>
      </div>

      <!-- In Progress -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex items-center justify-between mb-4">
          <div class="p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg">
            <i class="pi pi-spin pi-spinner text-2xl text-purple-600 dark:text-purple-400"></i>
          </div>
          <span class="text-3xl font-bold text-gray-900 dark:text-white">{{ dashboardStats.inProgressTasks }}</span>
        </div>
        <h3 class="text-sm font-medium text-gray-600 dark:text-gray-400">ุฌุงุฑู ุงูุชูููุฐ</h3>
      </div>

      <!-- Completed This Week -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex items-center justify-between mb-4">
          <div class="p-3 bg-green-100 dark:bg-green-900/30 rounded-lg">
            <i class="pi pi-check-circle text-2xl text-green-600 dark:text-green-400"></i>
          </div>
          <span class="text-3xl font-bold text-gray-900 dark:text-white">{{ dashboardStats.completedThisWeek }}</span>
        </div>
        <h3 class="text-sm font-medium text-gray-600 dark:text-gray-400">ููุชููุฉ ูุฐุง ุงูุฃุณุจูุน</h3>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Today's Tasks List -->
      <div
        class="lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-xl font-bold text-gray-900 dark:text-white">๐ ููุงู ุงูููู</h2>
          <p-button label="ุนุฑุถ ุงููู" icon="pi pi-arrow-left" [text]="true" routerLink="/management/tasks"></p-button>
        </div>

        <div *ngIf="todayTasks.length === 0" class="text-center py-12">
          <i class="pi pi-check-circle text-6xl text-green-500 mb-4"></i>
          <p class="text-gray-500 dark:text-gray-400">ูุง ุชูุฌุฏ ููุงู ููููู! ๐</p>
        </div>

        <div *ngFor="let task of todayTasks"
          class="mb-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer"
          [routerLink]="['/management/tasks', task.id]">
          <div class="flex items-start justify-between mb-2">
            <h3 class="font-semibold text-gray-900 dark:text-white">{{ task.title }}</h3>
            <p-tag [value]="getStatusLabel(task.status)" [severity]="getStatusSeverity(task.status)"
              [rounded]="true"></p-tag>
          </div>
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">{{ task.description }}</p>
          <div class="flex items-center gap-2 text-xs text-gray-500">
            <i class="pi pi-calendar"></i>
            <span>{{ task.dueDate | date: 'dd/MM/yyyy' }}</span>
            <p-tag [value]="task.priority" [severity]="getPrioritySeverity(task.priority)" size="small"></p-tag>
          </div>
        </div>
      </div>

      <!-- Quick Actions & Break Status -->
      <div class="space-y-6">
        <!-- Break Status Card -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
          <h2 class="text-lg font-bold text-gray-900 dark:text-white mb-4">โ ุญุงูุฉ ุงูุงุณุชุฑุงุญุฉ</h2>

          <!-- Not Started & Not Completed -->
          <div *ngIf="!isOnBreak && !todayBreakCompleted" class="text-center py-6">
            <i class="pi pi-coffee text-4xl text-gray-400 mb-3"></i>
            <p class="text-gray-600 dark:text-gray-400 mb-4">ูุณุช ูู ุงุณุชุฑุงุญุฉ ุญุงููุงู</p>
            <p-button label="ุจุฏุก ุงุณุชุฑุงุญุฉ" icon="pi pi-play" (click)="startBreak()" styleClass="w-full"></p-button>
          </div>

          <!-- On Break -->
          <div *ngIf="isOnBreak" class="text-center py-6">
            <i class="pi pi-pause-circle text-4xl text-orange-500 mb-3 animate-pulse"></i>
            <p class="text-gray-600 dark:text-gray-400 mb-2">ุฃูุช ูู ุงุณุชุฑุงุญุฉ</p>
            <p class="text-2xl font-bold text-orange-600 dark:text-orange-400 mb-4">{{ breakTimeRemaining }}</p>
            <p-button label="ุฅููุงุก ุงูุงุณุชุฑุงุญุฉ" icon="pi pi-stop" severity="danger" (click)="endBreak()"
              styleClass="w-full"></p-button>
          </div>

          <!-- Completed Today -->
          <div *ngIf="todayBreakCompleted"
            class="text-center py-6 bg-green-50/50 dark:bg-green-900/10 rounded-xl border border-green-100 dark:border-green-900/20">
            <i class="pi pi-check-circle text-4xl text-green-500 mb-3"></i>
            <p class="text-gray-700 dark:text-green-400 font-semibold mb-4">ุชู ุฃุฎุฐ ุงุณุชุฑุงุญุฉ ุงูููู ุจูุฌุงุญ โจ</p>
            <p-button label="ุชู ุฃุฎุฐ ุงุณุชุฑุงุญุฉ ุงูููู" icon="pi pi-check" [disabled]="true"
              styleClass="w-full p-button-success p-button-outlined"></p-button>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
          <h2 class="text-lg font-bold text-gray-900 dark:text-white mb-4">โก ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ</h2>
          <div class="space-y-3">
            <p-button label="ููุงูู" icon="pi pi-list" [outlined]="true" routerLink="/management/my-tasks"
              styleClass="w-full justify-start"></p-button>
            <p-button label="ุทูุจ ุตูุงุญูุฉ" icon="pi pi-key" [outlined]="true" routerLink="/management/my-permissions"
              styleClass="w-full justify-start"></p-button>
            <p-button label="ุงูุฅุนุฏุงุฏุงุช" icon="pi pi-cog" [outlined]="true" routerLink="/settings"
              styleClass="w-full justify-start"></p-button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Supervisor Dashboard -->
  <div *ngIf="authService.isSupervisor() || authService.isAdmin()">
    <!-- Supervisor Stats -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <!-- Active Employees -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex items-center justify-between mb-4">
          <div class="p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg">
            <i class="pi pi-users text-2xl text-blue-600 dark:text-blue-400"></i>
          </div>
          <span class="text-3xl font-bold text-gray-900 dark:text-white">{{ teamStats.activeEmployees }}</span>
        </div>
        <h3 class="text-sm font-medium text-gray-600 dark:text-gray-400">ุงูููุธููู ุงููุดุทูู</h3>
      </div>

      <!-- Employees on Break -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex items-center justify-between mb-4">
          <div class="p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg">
            <i class="pi pi-coffee text-2xl text-orange-600 dark:text-orange-400"></i>
          </div>
          <span class="text-3xl font-bold text-gray-900 dark:text-white">{{ teamStats.employeesOnBreak }}</span>
        </div>
        <h3 class="text-sm font-medium text-gray-600 dark:text-gray-400">ูู ุงุณุชุฑุงุญุฉ</h3>
      </div>

      <!-- Active Tasks -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex items-center justify-between mb-4">
          <div class="p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg">
            <i class="pi pi-check-square text-2xl text-purple-600 dark:text-purple-400"></i>
          </div>
          <span class="text-3xl font-bold text-gray-900 dark:text-white">{{ teamStats.activeTasks }}</span>
        </div>
        <h3 class="text-sm font-medium text-gray-600 dark:text-gray-400">ุงูููุงู ุงููุดุทุฉ</h3>
      </div>

      <!-- Pending Requests -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
        <div class="flex items-center justify-between mb-4">
          <div class="p-3 bg-red-100 dark:bg-red-900/30 rounded-lg">
            <i class="pi pi-bell text-2xl text-red-600 dark:text-red-400"></i>
          </div>
          <span class="text-3xl font-bold text-gray-900 dark:text-white">{{ teamStats.pendingRequests }}</span>
        </div>
        <h3 class="text-sm font-medium text-gray-600 dark:text-gray-400">ุทูุจุงุช ูุนููุฉ</h3>
      </div>
    </div>

    <!-- Supervisor Quick Actions -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <div
        class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white cursor-pointer hover:shadow-xl transition-shadow"
        routerLink="/management/tasks">
        <i class="pi pi-plus-circle text-4xl mb-3"></i>
        <h3 class="text-xl font-bold mb-2">ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ</h3>
        <p class="text-blue-100">ุฅุณูุงุฏ ูููุฉ ูุฃุญุฏ ุฃุนุถุงุก ุงููุฑูู</p>
      </div>

      <div
        class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white cursor-pointer hover:shadow-xl transition-shadow"
        routerLink="/management/team-performance">
        <i class="pi pi-chart-bar text-4xl mb-3"></i>
        <h3 class="text-xl font-bold mb-2">ุฅุญุตุงุฆูุงุช ุงููุฑูู</h3>
        <p class="text-purple-100">ุนุฑุถ ุชูุงุตูู ุฃุฏุงุก ุงููุฑูู</p>
      </div>

      <div
        class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-6 text-white cursor-pointer hover:shadow-xl transition-shadow"
        routerLink="/management/pending-permissions">
        <i class="pi pi-bell text-4xl mb-3"></i>
        <h3 class="text-xl font-bold mb-2">ูุฑุงุฌุนุฉ ุงูุทูุจุงุช</h3>
        <p class="text-orange-100">ุงูุทูุจุงุช ุงููุนููุฉ ููููุงููุฉ</p>
      </div>
    </div>
  </div>

  <!-- Departments Navigation -->
  <div class="mt-8" *ngIf="filteredDepartments.length > 0">
    <h2 class="text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2">
      <i class="pi pi-compass text-2xl text-primary"></i>
      <span>ุงูุฃูุณุงู ุงููุชุงุญุฉ</span>
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6">
      <div *ngFor="let dep of filteredDepartments" [routerLink]="dep.route"
        class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700 cursor-pointer transform transition hover:scale-105 hover:shadow-lg">
        <div class="flex items-center gap-4 mb-3">
          <span class="text-3xl">{{ dep.icon }}</span>
          <h2 class="text-lg font-semibold text-gray-900 dark:text-white">{{ dep.name }}</h2>
        </div>
        <p class="text-xs text-gray-500">ุงููุฑ ููุฏุฎูู ุฅูู ูุณู {{ dep.name }}</p>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="flex items-center justify-center py-20">
    <i class="pi pi-spin pi-spinner text-4xl text-blue-500"></i>
  </div>
</div>