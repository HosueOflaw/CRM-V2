<app-go-back></app-go-back>
<div class="p-6 min-h-screen flex flex-col gap-6"
     style="background-color: var(--surface-ground);">
  <h2 class="text-2xl font-bold text-center"
      style="color: var(--primary-color);">{{ title }}</h2>

  <form [formGroup]="filterForm" class="p-6 rounded-xl shadow flex flex-wrap gap-4 justify-center items-end"
        style="background-color: var(--surface-card);">
    <div>
      <label class="label font-semibold" style="color: var(--text-color);">{{ filterLabel }}</label>
      <div class="flex gap-2">
        <input
          type="text"
          formControlName="court"
          class="input input-bordered w-64"
          style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
          placeholder="ุงุฎุชุฑ..."
          readonly
        />
        <button type="button" class="btn btn-outline" (click)="openModal()">๐ ุงุฎุชูุงุฑ</button>
      </div>
    </div>

    <div class="flex gap-2 mt-4">
      <button type="button" class="btn btn-primary" (click)="searchByCourt()">๐ ุจุญุซ</button>
      <button type="button" class="btn btn-outline" (click)="reset()">โฉ๏ธ ุชุฑุงุฌุน</button>
    </div>
  </form>

  <div class="flex justify-between items-center p-4 rounded-xl shadow"
       style="background-color: var(--surface-card);">
    <input
      [(ngModel)]="searchText"
      (input)="autoSearch()"
      [placeholder]="searchPlaceholder"
      class="input input-bordered w-1/2"
      style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
    />
    <button class="btn btn-success" (click)="exportToExcel()">๐ฅ ุชุญููู Excel</button>
  </div>

  <div class="overflow-x-auto rounded-xl shadow"
       style="background-color: var(--surface-card);">
    <table class="table table-zebra w-full text-sm"
           style="border-color: var(--surface-border);">
      <thead>
        <tr style="background-color: var(--surface-section);">
          <th *ngFor="let col of columns" style="color: var(--text-color);">{{ col.header }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of filteredResults; let i = index"
            [style.background-color]="i % 2 === 0 ? 'var(--surface-card)' : 'var(--surface-ground)'"
            style="color: var(--text-color);">
          <td *ngFor="let col of columns">{{ r[col.field] }}</td>
        </tr>

        <tr *ngIf="filteredResults.length === 0">
          <td [attr.colspan]="columns.length" class="text-center py-6"
              style="color: var(--text-color-secondary);">
            ูุง ุชูุฌุฏ ุจูุงูุงุช ูุทุงุจูุฉ ๐
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- ๐น Lookup Modal -->
  <app-lookup-modal
    #lookup
    [title]="lookupConfig.title"
    [columns]="lookupConfig.columns"
    [data]="lookupConfig.data"
    (itemSelected)="handleSelect($event)"
  ></app-lookup-modal>
</div>
