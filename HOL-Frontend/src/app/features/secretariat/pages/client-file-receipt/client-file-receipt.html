<div  class="flex flex-col h-screen font-sans text-sm"
      style="background-color: var(--surface-ground);">

  <!-- ========================================== -->
  <!-- 1. شريط الأدوات العلوي -->
  <!-- ========================================== -->
  <div class="border-b p-2 flex justify-between items-center shadow-sm"
       style="background-color: var(--surface-section); border-color: var(--surface-border);">
    
    <!-- الجانب الأيسر: زر تم استلام الملفات -->
    <div>
      <button class="btn btn-sm px-6 rounded-sm font-normal h-8 min-h-0 shadow-sm"
              style="background-color: var(--surface-hover); color: var(--text-color); border-color: var(--surface-border);"
              (click)="receiveFiles()">
        تم استلام الملفات
      </button>
    </div>

    <!-- الجانب الأيمن: البحث والموكل -->
    <div class="flex items-center gap-2">
      
      <!-- زر بحث -->
      <button class="btn btn-sm px-6 rounded-sm font-normal h-8 min-h-0 shadow-sm"
              style="background-color: var(--surface-hover); color: var(--text-color); border-color: var(--surface-border);"
              (click)="search()">
        بحث
      </button>

      <!-- زر ... (المودال) -->
      <button class="btn btn-sm btn-square rounded-sm font-normal h-8 min-h-0 shadow-sm"
              style="background-color: var(--surface-hover); color: var(--text-color); border-color: var(--surface-border);"
              (click)="openClientModal()">
        ...
      </button>

      <!-- حقل اسم الموكل -->
      <input type="text" 
             [(ngModel)]="selectedClientName"
             class="input input-sm h-8 rounded-sm focus:outline-none w-64"
             style="border-color: var(--primary-color); background-color: var(--surface-card); color: var(--text-color);"
             readonly /> <!-- readonly لأننا نختار من المودال -->

      <!-- العنوان -->
      <label class="font-bold px-1" style="color: var(--text-color);">الموكل</label>

    </div>

  </div>

  <!-- ========================================== -->
  <!-- 2. شريط التجميع (Grouping Bar) -->
  <!-- ========================================== -->
  <div class="border-b p-1 px-4 text-xs select-none flex items-center gap-2"
       style="background-color: var(--surface-section); border-color: var(--surface-border); color: var(--text-color-secondary);">
    <!-- أيقونة البحث الصغيرة -->
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"
         style="color: var(--text-color-secondary);">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
    </svg>
    <span>Drag a column header here to group by that column</span>
  </div>


</div>

<!-- ========================================== -->
<!-- 4. استدعاء المودال -->
<!-- ========================================== -->
<app-lookup-modal
  #clientLookup
  [title]="'بحث عن موكل'"
  [data]="clientsData"
  [columns]="['code', 'name', 'type']"
  (itemSelected)="onClientSelected($event)">
</app-lookup-modal>