<div  class="flex flex-col h-screen bg-gray-50 font-sans text-sm">

  <!-- ========================================== -->
  <!-- 1. شريط الأدوات العلوي -->
  <!-- ========================================== -->
  <div class="bg-gray-100 border-b border-gray-300 p-2 flex justify-between items-center shadow-sm">
    
    <!-- الجانب الأيسر: زر تم استلام الملفات -->
    <div>
      <button class="btn btn-sm bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300 px-6 rounded-sm font-normal h-8 min-h-0 shadow-sm"
              (click)="receiveFiles()">
        تم استلام الملفات
      </button>
    </div>

    <!-- الجانب الأيمن: البحث والموكل -->
    <div class="flex items-center gap-2">
      
      <!-- زر بحث -->
      <button class="btn btn-sm bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300 px-6 rounded-sm font-normal h-8 min-h-0 shadow-sm"
              (click)="search()">
        بحث
      </button>

      <!-- زر ... (المودال) -->
      <button class="btn btn-sm btn-square bg-gray-200 hover:bg-gray-300 text-gray-800 border-gray-300 rounded-sm font-normal h-8 min-h-0 shadow-sm"
              (click)="openClientModal()">
        ...
      </button>

      <!-- حقل اسم الموكل -->
      <input type="text" 
             [(ngModel)]="selectedClientName"
             class="input input-sm h-8 rounded-sm border-blue-400 focus:border-blue-600 focus:outline-none w-64 bg-white"
             readonly /> <!-- readonly لأننا نختار من المودال -->

      <!-- العنوان -->
      <label class="font-bold text-gray-700 px-1">الموكل</label>

    </div>

  </div>

  <!-- ========================================== -->
  <!-- 2. شريط التجميع (Grouping Bar) -->
  <!-- ========================================== -->
  <div class="bg-gray-200 border-b border-gray-300 p-1 px-4 text-xs text-gray-500 select-none flex items-center gap-2">
    <!-- أيقونة البحث الصغيرة -->
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
    </svg>
    <span>Drag a column header here to group by that column</span>
  </div>


</div>

<!-- ========================================== -->
<!-- 4. استدعاء المودال -->
<!-- ========================================== -->
<app-lookup-modal
  #clientLookup
  [title]="'بحث عن موكل'"
  [data]="clientsData"
  [columns]="['code', 'name', 'type']"
  (itemSelected)="onClientSelected($event)">
</app-lookup-modal>