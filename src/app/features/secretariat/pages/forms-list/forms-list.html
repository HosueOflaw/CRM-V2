<div dir="rtl" class="flex flex-col h-screen bg-base-100 p-4 font-sans text-sm">

  <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4 bg-base-200 p-3 rounded-lg border border-base-300">
    
    <h1 class="text-2xl font-bold text-gray-700 flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
      </svg>
      الاستمارات
    </h1>

    <div class="flex flex-wrap items-end gap-2">
      
      <div class="form-control w-full sm:w-auto">
        <label class="label p-0 pb-1">
          <span class="label-text text-xs font-bold">من تاريخ</span>
        </label>
        <input type="date" [(ngModel)]="fromDate" class="input input-bordered input-sm w-full sm:w-40" />
      </div>

      <div class="form-control w-full sm:w-auto">
        <label class="label p-0 pb-1">
          <span class="label-text text-xs font-bold">إلى تاريخ</span>
        </label>
        <input type="date" [(ngModel)]="toDate" class="input input-bordered input-sm w-full sm:w-40" />
      </div>

      <button class="btn btn-sm btn-success text-white gap-2">
        استمارات اليوم
      </button>

      <button class="btn btn-sm btn-neutral gap-2 px-6">
        بحث ..
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
      </button>
    </div>
  </div>

  <div dir="rtl" class="flex flex-col h-screen bg-base-100 p-4 font-sans text-sm">

  <div class="flex-grow overflow-auto border border-base-300 rounded-t-lg shadow-sm bg-white relative">
    <table class="table table-xs table-pin-rows table-zebra w-full whitespace-nowrap">
      
      <thead>
        <tr class="bg-gray-100 text-gray-800 font-bold">
          <th>#</th>
          <th>الكود</th>
          <th>الاسم</th>
          <th>رقم الباتش</th>
          <th>سبب المديونية</th>
          <th>الموكل</th>
          <th>اسم الموظف</th>
          <th>الحالة</th>
          <th class="text-center">قيمة المطالبة</th>
          <th class="text-center">المدفوع</th>
          <th class="text-center">المتبقي</th>
          <th>الجنسية</th>
          <th>الرقم المدني</th>
          <th>الموظف</th>
          <th>كود الموكل</th>
        </tr>
      </thead>
      
      <tbody>
        <tr *ngFor="let row of paginatedRows; let i = index" class="hover">
          <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
          <td class="font-mono">{{ row.code }}</td>
          <td class="font-medium text-blue-900">{{ row.name }}</td>
          <td>{{ row.batchNo }}</td>
          <td>{{ row.debtReason }}</td>
          <td class="max-w-xs truncate" title="{{row.client}}">{{ row.client }}</td>
          <td>
            <span class="badge badge-ghost badge-sm">{{ row.employeeName }}</span>
          </td>
          <td>
            <span class="badge badge-xs p-2" 
                  [ngClass]="{
                    'badge-warning': row.status === 'ودي فقط', 
                    'badge-error': row.status === 'مغادرة نهائي',
                    'badge-info': row.status === 'تنفيذ'
                  }">
              {{ row.status }}
            </span>
          </td>
          <td class="text-center">{{ row.claimValue }}</td>
          <td class="text-center">{{ row.paid }}</td>
          <td class="text-center font-bold text-red-600">{{ row.remaining }}</td>
          <td>{{ row.nationality }}</td>
          <td class="font-mono">{{ row.civilId }}</td>
          <td class="text-center">{{ row.employeeId }}</td>
          <td class="font-mono">{{ row.clientCode }}</td>
        </tr>

        <tr *ngIf="paginatedRows.length === 0">
          <td colspan="15" class="text-center p-4 text-gray-500">
            لا توجد بيانات للعرض
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="bg-base-200 border-t border-base-300 p-2 flex justify-between items-center rounded-b-lg">
    
    <div class="text-xs text-gray-500">
      عرض {{ rows.length > 0 ? (currentPage - 1) * pageSize + 1 : 0 }} إلى 
      {{ (currentPage * pageSize) > rows.length ? rows.length : (currentPage * pageSize) }} 
      من أصل {{ rows.length }} سجل
    </div>

    <div class="join">
      <button class="join-item btn btn-sm" 
              [disabled]="currentPage === 1" 
              (click)="changePage(currentPage - 1)">
        «
      </button>

      <ng-container *ngFor="let page of pagesArray">
          <button  
              class="join-item btn btn-sm" 
              [class.btn-active]="page === currentPage"
              (click)="changePage(page)">
            {{ page }}
          </button>
      </ng-container>

      <button class="join-item btn btn-sm" 
              [disabled]="currentPage === totalPages || totalPages === 0" 
              (click)="changePage(currentPage + 1)">
        »
      </button>
    </div>

    <select class="select select-bordered select-xs w-20" [(ngModel)]="pageSize" (change)="currentPage = 1">
      <option [ngValue]="5">5</option>
      <option [ngValue]="10">10</option>
      <option [ngValue]="20">20</option>
      <option [ngValue]="50">50</option>
    </select>

  </div>

</div>
</div>