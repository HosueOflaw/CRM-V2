<!-- Main Page Tabs -->
<div class="tabs tabs-boxed">
  <button class="tab"
          [class.tab-active]="activeMainTab === 'clients'"
          (click)="setMainTab('clients')">
    ุงูุนููุงุก
  </button>
  <button class="tab"
          [class.tab-active]="activeMainTab === 'main'"
          (click)="setMainTab('main')">
    ุงูุฑุฆูุณูุฉ
  </button>
  <button class="tab"
          [class.tab-active]="activeMainTab === 'searchNumbers'"
          (click)="setMainTab('searchNumbers')">
    ุจุญุซ ุฃุฑูุงู
  </button>
  <button class="tab"
          [class.tab-active]="activeMainTab === 'menuSearch'"
          (click)="setMainTab('menuSearch')">
    ูุงุฆูุฉ ุงูุจุญุซ
  </button>
  <button class="tab"
          [class.tab-active]="activeMainTab === 'FeesAndCollection'"
          (click)="setMainTab('FeesAndCollection')">
    ุงูุฑุณูู ูุงูุชุญุตูู
  </button>
  <button class="tab"
          [class.tab-active]="activeMainTab === 'notes'"
          (click)="setMainTab('notes')">
    ููุงุญุธุงุช
  </button>
  <button class="tab"
          [class.tab-active]="activeMainTab === 'preview'"
          (click)="setMainTab('preview')">
    Preview
  </button>
  <button class="tab"
          [class.tab-active]="activeMainTab === 'newFiles'"
          (click)="setMainTab('newFiles')">
    ุงููููุงุช ุงูุฌุฏูุฏุฉ
  </button>
  <button class="tab"
          [class.tab-active]="activeMainTab === 'statements'"
          (click)="setMainTab('statements')">
    ุงูุงูุงุฏุงุช
  </button>
  <button class="tab"
          [class.tab-active]="activeMainTab === 'searchStatements'"
          (click)="setMainTab('searchStatements')">
    ุจุญุซ ุงูุงูุงุฏุงุช
  </button>
  <button class="tab"
          [class.tab-active]="activeMainTab === 'stats'"
          (click)="setMainTab('stats')">
    ุงูุงุญุตุงุฆูุงุช
  </button>
</div>

<!-- clients -->
<div *ngIf="activeMainTab === 'clients'" class="page-content">
  <div class="table-container">
    <table class="table">
      <thead>
        <tr>
          <th>#</th>
          <th>ุงูููุฏ</th>
          <th>ุงูุงุณู</th>
          <th>ุญุงูุฉ ุงูููู</th>
          <th>ุณุจุจ ุงููุฏููููุฉ</th>
          <th>ุฑูู ุงูุจุงุชุด</th>
          <th>ุฑูู ุงูุนูุฏ</th>
          <th>ุงูุฌูุณูุฉ</th>
          <th>ุงูุฑูู ุงููุฏูู</th>
          <th>ุงููุฏููุน</th>
          <th>ูููุฉ ุงููุทุงูุจุฉ</th>
          <th>ุงููุชุจูู</th>
          <th>ุงูุนููุงู</th>
          <th>ุงููููู</th>
          <th>ุญุงูุฉ ุงููุชุงุจุนุฉ</th>
          <th>ุญุงูุฉ ุงูุนููู</th>
          <th>ุญุงูุฉ ุงูุชูุงุตู</th>
          <th>ุญุงูุฉ ุงูุชุนุงูู</th>
          <th>ุญุงูุฉ ุงููุฏููุฉ</th>
          <th>ุญุงูุฉ ุงูุฏุงุฎููุฉ</th>
          <th>ุงุฎุฑ ุณุฏุงุฏ</th>
          <th>ุชุงุฑูุฎ ุงุฎุฑ ุณุฏุงุฏ</th>
          <th>ุงุฎุฑ ุงูุงุฏุฉ</th>
          <th>ุชุงุฑูุฎ ุงุฎุฑ ุงูุงุฏุฉ</th>
          <th>ุชุงุฑูุฎ ุงููุฑุงุฌุนุฉ</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of clientRows; let i = index">
          <td class="text-center">{{ i + 1 }}</td>
          <td>{{row.code}}</td>
          <td style="font-weight: 600; color: var(--primary-color);">{{row.name}}</td>
          <td>{{row.fileStatus}}</td>
          <td>{{row.debtReason}}</td>
          <td>{{row.batch}}</td>
          <td>{{row.contractNum}}</td>
          <td>{{row.nationality}}</td>
          <td>{{row.civilId}}</td>
          <td style="color: var(--green-500); font-weight: 600;">{{row.paid | number}}</td>
          <td style="color: var(--red-500); font-weight: 600;">{{row.claim | number}}</td>
          <td>{{row.remaining | number}}</td>
          <td style="max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{row.address}}</td>
          <td style="max-width: 100px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" [title]="row.client">{{row.client}}</td>
          <td>{{row.followUpStatus}}</td>
          <td>{{row.clientStatus}}</td>
          <td>{{row.contactStatus}}</td>
          <td>{{row.cooperationStatus}}</td>
          <td>{{row.civilStatus}}</td>
          <td>{{row.internalStatus}}</td>
          <td>{{row.lastPaymentAmount | number}}</td>
          <td>{{row.lastPaymentDate}}</td>
          <td style="max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" [title]="row.lastStatement">{{row.lastStatement}}</td>
          <td>{{row.lastStatementDate}}</td>
          <td>{{row.reviewDate}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- main -->
<div *ngIf="activeMainTab === 'main'" class="page-content">
  <div class="flex flex-col gap-4">
    <!-- Top Section: Client Info & Financial -->
    <div class="grid grid-cols-12 gap-4">
      <!-- Client Details Card -->
      <div class="col-span-4 card">
        <div class="card-body">
          <div class="form-grid">
            <div class="form-field">
              <label class="form-label">ุงููููู</label>
              <input type="text" class="form-input" value="pruip" readonly />
            </div>
            <div class="form-field">
              <label class="form-label">ุงูุนููู</label>
              <input type="text" class="form-input" value="ูุญูุฏ ุฌูุนุงู" readonly />
            </div>
            <div class="form-field">
              <label class="form-label">ุงููุฏูู</label>
              <input type="text" class="form-input" value="285110604288" readonly />
            </div>
            <div class="form-field">
              <label class="form-label">ุงูุญุงูุฉ</label>
              <input type="text" class="form-input" value="ุญูุธ" readonly />
            </div>
            <div class="form-field">
              <label class="form-label">ุงูุฌูุณูุฉ</label>
              <input type="text" class="form-input" value="ุณุฑููุงููู" readonly />
            </div>
            <div class="form-field">
              <label class="form-label">ุงูุชุตููู</label>
              <input type="text" class="form-input" readonly />
            </div>
            <div class="form-field">
              <label class="form-label">ุงูุนูุฏ</label>
              <input type="text" class="form-input" value="1000173537" readonly />
            </div>
            <div class="form-field">
              <label class="form-label">ุงููุฏููููุฉ</label>
              <input type="text" class="form-input" value="51085012" readonly />
            </div>
            <div class="form-field">
              <label class="form-label">ุงูุฃุฑูุงู ุงูุขููุฉ</label>
              <input type="text" class="form-input" value="140268930" readonly />
            </div>
            <div class="form-field">
              <label class="form-label">ุงูุจุงุชุด</label>
              <input type="text" class="form-input" value="R1" readonly />
            </div>
            <div class="form-field form-field-full">
              <label class="form-label">ุงูุนููุงู</label>
              <input type="text" class="form-input" value="ุงูููุจููุฉ - ูุทุนุฉ 6 - ูุณููุฉ 254" readonly />
            </div>
          </div>
        </div>
      </div>
      
      <!-- Main Content Card -->
      <div class="col-span-8 card">
        <div class="card-body">

          <div class="tabs">
            <a class="tab tab-bordered"
               [class.tab-active]="activeSubTab === 'main'"
               (click)="changeTab('main')">
              ุงูุฑุฆูุณูุฉ
            </a>
            <a class="tab tab-bordered"
               [class.tab-active]="activeSubTab === 'classification'"
               (click)="changeTab('classification')">
              ุชุตููู
            </a>
            <a class="tab tab-bordered"
               [class.tab-active]="activeSubTab === 'files'"
               (click)="changeTab('files')">
              ุงุฌูุงูู ุงููููุงุช
            </a>
            <a class="tab tab-bordered"
               [class.tab-active]="activeSubTab === 'company-link'"
               (click)="changeTab('company-link')">
              ุฑุงุจุท ุงูุดุฑูุฉ
            </a>
            <a class="tab tab-bordered"
               [class.tab-active]="activeSubTab === 'fees'"
               (click)="changeTab('fees')">
              ุงูุฑุณูู
            </a>
            <a class="tab tab-bordered"
               [class.tab-active]="activeSubTab === 'details'"
               (click)="changeTab('details')">
              ุชูุงุตูู ุงููุทุงูุจุฉ
            </a>
            <a class="tab tab-bordered"
               [class.tab-active]="activeSubTab === 'checks'"
               (click)="changeTab('checks')">
              ุงูุดููุงุช
            </a>
            <a class="tab tab-bordered"
               [class.tab-active]="activeSubTab === 'attachments'"
               (click)="changeTab('attachments')">
              ุงููุฑููุงุช
            </a>
            <a class="tab tab-bordered"
               [class.tab-active]="activeSubTab === 'categories'"
               (click)="changeTab('categories')">
              ุงูุชุตูููุงุช
            </a>
          </div>

           <div *ngIf="activeSubTab === 'main'">

            <div class="grid grid-cols-12 gap-6 p-4" dir="rtl" style="display: block;">

  <!-- ========================= -->
  <!-- ๐ฆ ุงููููู (ุงููุต ุงูุฃูู) -->
  <!-- ========================= -->
  <div class="col-span-12 lg:col-span-8 space-y-6">

    <!-- ุงููุทุงุน + ุงููุญุงูู + ุงุณู ุงููุฏุนู -->
    <div class="form-grid form-grid-2">
      <div class="form-field">
        <label class="form-label">ุงููุทุงุน</label>
        <input type="text" class="form-input" />
      </div>
      <div class="form-field">
        <label class="form-label">ุงููุญุงูู</label>
        <input type="text" class="form-input" />
      </div>
      <div class="form-field form-field-full">
        <label class="form-label">ุงุณู ุงููุฏุนู ุงููุงูููู</label>
        <input type="text" class="form-input" />
      </div>
    </div>

    <!-- ุงูููุงุญุธุงุช Tabs -->
    <div>
      <div class="tabs">
        <button class="tab tab-bordered" [class.tab-active]="activeNoteTab===1" (click)="activeNoteTab=1">ููุงุญุธุงุช</button>
        <button class="tab tab-bordered" [class.tab-active]="activeNoteTab===2" (click)="activeNoteTab=2">ููุงุญุธุงุช 2</button>
        <button class="tab tab-bordered" [class.tab-active]="activeNoteTab===3" (click)="activeNoteTab=3">ููุงุญุธุงุช 3</button>
        <button class="tab tab-bordered" [class.tab-active]="activeNoteTab===4" (click)="activeNoteTab=4">ููุงุญุธุงุช 4</button>
        <button class="tab tab-bordered" [class.tab-active]="activeNoteTab===5" (click)="activeNoteTab=5">ููุงุญุธุงุช ุงูุณูุฑุชุงุฑูุฉ</button>
        <button class="tab tab-bordered" [class.tab-active]="activeNoteTab===6" (click)="activeNoteTab=6">ููุงุญุธุงุช 6</button>
      </div>

      <textarea *ngIf="activeNoteTab===1" class="form-textarea" rows="4"></textarea>
      <textarea *ngIf="activeNoteTab===2" class="form-textarea" rows="4"></textarea>
      <textarea *ngIf="activeNoteTab===3" class="form-textarea" rows="4"></textarea>
      <textarea *ngIf="activeNoteTab===4" class="form-textarea" rows="4"></textarea>
      <textarea *ngIf="activeNoteTab===5" class="form-textarea" rows="4"></textarea>
      <textarea *ngIf="activeNoteTab===6" class="form-textarea" rows="4"></textarea>
    </div>

      <div class="flex justify-between gap-6">
        <!-- ุงูุชูุงุฑูุฎ -->
        <div class="card" style="flex: 1;">
          <div class="card-body">
            <div class="form-grid">
              <div class="form-field">
                <label class="form-label">ุชุงุฑูุฎ ุงููุฑูุฏ</label>
                <input type="date" class="form-input" />
              </div>
              <div class="form-field">
                <label class="form-label">ุชุงุฑูุฎ ุงูุงุณุชูุงู</label>
                <input type="date" class="form-input" />
              </div>
              <div class="form-field">
                <label class="form-label">ุชุงุฑูุฎ ุงูุณุญุจ</label>
                <input type="date" class="form-input" />
              </div>
              <div class="form-field">
                <label class="form-label">ุชุงุฑูุฎ ุฃูู ูุฑูุฏ</label>
                <input type="date" class="form-input" />
              </div>
            </div>
          </div>
        </div>

        <!-- ุงูููุน + ุงููุบุฉ -->
        <div class="flex flex-col gap-4" style="flex: 1;">
          <div class="card">
            <div class="card-body">
              <label class="form-label">ูุบุฉ ุงูุชูุงุตู</label>
              <div class="radio-group">
                <label>
                  <input type="radio" name="lang" class="radio" />
                  <span>ุนุฑุจู</span>
                </label>
                <label>
                  <input type="radio" name="lang" class="radio" />
                  <span>ุฅูุฌููุฒู</span>
                </label>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-body">
              <label class="form-label">ุงูููุน</label>
              <div class="radio-group">
                <label>
                  <input type="radio" name="gender" class="radio" />
                  <span>ุฐูุฑ</span>
                </label>
                <label>
                  <input type="radio" name="gender" class="radio" />
                  <span>ุฃูุซู</span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>


  </div>

  <!-- ========================= -->
  <!-- ๐ฅ ุงูุดูุงู (ุงููุต ุงูุซุงูู) -->
  <!-- ========================= -->
  <div class="col-span-12 lg:col-span-4 space-y-6">

 

    <!-- ุงููุญููุฉ + ุงูุฏุงุฎููุฉ + ุงููุฏููุฉ -->
    <div class="form-grid">
      <div class="form-field">
        <label class="form-label">ุงููุญููุฉ</label>
        <div class="form-row">
          <input type="text" class="form-input" style="flex: 1;" [(ngModel)]="courtValue" name="courtValue" />
          <button class="form-button form-button-outline" (click)="openLookup('court')">...</button>
        </div>
      </div>
      <div class="form-field">
        <label class="form-label">ุญุงูุฉ ุงูุฏุงุฎููุฉ</label>
        <div class="form-row">
          <input type="text" class="form-input" style="flex: 1;" [(ngModel)]="internalStatus" name="internalStatus" />
          <button class="form-button form-button-outline" (click)="openLookup('interior')">...</button>
        </div>
      </div>
      <div class="form-field">
        <label class="form-label">ุญุงูุฉ ุงููุฏููุฉ</label>
        <div class="form-row">
          <input type="text" class="form-input" style="flex: 1;" [(ngModel)]="civilStatus" name="civilStatus" />
          <button class="form-button form-button-outline" (click)="openLookup('civil')">...</button>
        </div>
      </div>
    </div>

    <!-- ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช -->
    <div class="form-actions">
      <button class="form-button form-button-success">ุญูุธ</button>
      <button class="form-button form-button-success">ูุดู ุญุณุงุจ ุณูุงุฑุงุช</button>
      <button class="form-button form-button-success">ุจุฑุงุกุฉ ุฐูุฉ</button>
      <button class="form-button form-button-success">ุงุณุชูุงุฑุฉ ุงูุนููู</button>
      <button class="form-button form-button-success">ุชุตููู ุงูุนููู</button>
    </div>

  </div>

            </div>

                 
            </div>
            <div *ngIf="activeSubTab === 'classification'" style="display: block;">
              <div class="form-grid form-grid-1">
                <!-- Main Classification -->
                <div class="form-field">
                  <label class="form-label">ุญุงูุฉ ุงูุนููู</label>
                  <select class="form-select">
                    <option selected>ุญุงูุฉ ุงูุนููู</option>
                  </select>
                </div>
                <div class="form-field">
                  <label class="form-label">ุญุงูุฉ ุงููุทุงูุจุฉ</label>
                  <select class="form-select">
                    <option selected>ุญุงูุฉ ุงููุทุงูุจุฉ</option>
                  </select>
                </div>
                <div class="form-field">
                  <label class="form-label">ุญุงูุฉ ุงูุณุฏุงุฏ</label>
                  <select class="form-select">
                    <option selected>ุญุงูุฉ ุงูุณุฏุงุฏ</option>
                  </select>
                </div>
                <div class="form-field">
                  <label class="form-label">ุญุงูุฉ ุงูููู</label>
                  <select class="form-select">
                    <option selected>ุญุงูุฉ ุงูููู</option>
                  </select>
                </div>
                <div class="form-field">
                  <label class="form-label">ุญุงูุฉ ุงูุฅุฌุฑุงุกุงุช</label>
                  <select class="form-select">
                    <option selected>ุญุงูุฉ ุงูุฅุฌุฑุงุกุงุช</option>
                  </select>
                </div>
                <div class="form-field">
                  <label class="form-label">ุญุงูุฉ ุงููุชุงุจุนุฉ</label>
                  <select class="form-select">
                    <option selected>ุญุงูุฉ ุงููุชุงุจุนุฉ</option>
                  </select>
                </div>
                
                <!-- Discount Box -->
                <div class="card form-field-full">
                  <div class="card-header">
                    <h3>ุงูุฎุตู</h3>
                  </div>
                  <div class="card-body">
                    <div class="form-grid">
                      <div class="form-field">
                        <label class="form-label">ุงูุฎุตู</label>
                        <select class="form-select">
                          <option selected>ุงูุฎุตู</option>
                        </select>
                      </div>
                      <div class="form-field">
                        <label class="form-label">ุงููุจูู</label>
                        <select class="form-select">
                          <option selected>ุงููุจูู</option>
                        </select>
                      </div>
                    </div>
                    <div class="card-footer">
                      <button class="form-button form-button-secondary">ุญูุธ</button>
                    </div>
                  </div>
                </div>
                
                <!-- Income Source Box -->
                <div class="card form-field-full">
                  <div class="card-header">
                    <h3>ูุตุฏุฑ ุงูุฏุฎู</h3>
                  </div>
                  <div class="card-body">
                    <div class="form-grid">
                      <div class="form-field">
                        <label class="form-label">ุงูุฏูุงู</label>
                        <select class="form-select">
                          <option selected>ุงูุฏูุงู</option>
                        </select>
                      </div>
                      <div class="form-field">
                        <label class="form-label">ููุงุญุธุงุช</label>
                        <input type="text" class="form-input" placeholder="ููุงุญุธุงุช" />
                      </div>
                      <div class="form-field">
                        <label class="form-label">ุงูุชุงุฑูุฎ</label>
                        <input type="date" class="form-input" />
                      </div>
                    </div>
                    <div class="card-footer">
                      <button class="form-button form-button-secondary">ุญูุธ</button>
                    </div>
                  </div>
                </div>

                <!-- Other Statuses -->
                <div class="form-field">
                  <label class="form-label">ุญุงูุฉ ุงูุฏุงุฎููุฉ</label>
                  <select class="form-select">
                    <option selected>ุญุงูุฉ ุงูุฏุงุฎููุฉ</option>
                  </select>
                </div>
                <div class="form-field">
                  <label class="form-label">ุญุงูุฉ ุงููุฏููุฉ</label>
                  <select class="form-select">
                    <option selected>ุญุงูุฉ ุงููุฏููุฉ</option>
                  </select>
                </div>
                <div class="form-field">
                  <label class="form-label">ุญุงูุฉ ุงูุชูุงุตู</label>
                  <select class="form-select">
                    <option selected>ุญุงูุฉ ุงูุชูุงุตู</option>
                  </select>
                </div>
                <div class="form-field">
                  <label class="form-label">ุญุงูุฉ ุงูุชุนุงูู</label>
                  <select class="form-select">
                    <option selected>ุญุงูุฉ ุงูุชุนุงูู</option>
                  </select>
                </div>
              </div>
              <div class="form-actions">
                <button class="form-button form-button-primary">ุญูุธ</button>
              </div>
            </div>

            <div *ngIf="activeSubTab === 'files'">
              <div class="form-grid form-grid-2">
                <!-- ุงููุทุงูุจุฉ -->
                <div class="form-field">
                  <label class="form-label">ุงููุทุงูุจุฉ ููู ุงููููุงุช</label>
                  <input type="number" class="form-input" [(ngModel)]="files.claimAll" name="claimAll" />
                </div>
                <div class="form-field">
                  <label class="form-label">ุงููุทุงูุจุฉ ููุดุฑูุฉ ุงูุญุงููุฉ</label>
                  <input type="number" class="form-input" [(ngModel)]="files.claimCurrent" name="claimCurrent" />
                </div>

                <!-- ุงููุณุฏุฏ -->
                <div class="form-field">
                  <label class="form-label">ุงููุณุฏุฏ ููู ุงููููุงุช</label>
                  <input type="number" class="form-input" [(ngModel)]="files.paidAll" name="paidAll" />
                </div>
                <div class="form-field">
                  <label class="form-label">ุงููุณุฏุฏ ููุดุฑูุฉ ุงูุญุงููุฉ</label>
                  <input type="number" class="form-input" [(ngModel)]="files.paidCurrent" name="paidCurrent" />
                </div>

                <!-- ุงููุชุจูู -->
                <div class="form-field">
                  <label class="form-label">ุงููุชุจูู ููู ุงููููุงุช</label>
                  <input type="number" class="form-input" [(ngModel)]="files.remainingAll" name="remainingAll" />
                </div>
                <div class="form-field">
                  <label class="form-label">ุงููุชุจูู ููุดุฑูุฉ ุงูุญุงููุฉ</label>
                  <input type="number" class="form-input" [(ngModel)]="files.remainingCurrent" name="remainingCurrent" />
                </div>

                <!-- ุงูุฑุณูู -->
                <div class="form-field">
                  <label class="form-label">ุงูุฑุณูู ููู ุงููููุงุช</label>
                  <input type="number" class="form-input" [(ngModel)]="files.feesAll" name="feesAll" />
                </div>
                <div class="form-field">
                  <label class="form-label">ุงูุฑุณูู ููุดุฑูุฉ ุงูุญุงููุฉ</label>
                  <input type="number" class="form-input" [(ngModel)]="files.feesCurrent" name="feesCurrent" />
                </div>

                <!-- ุงููุชุจูู ุดุงูู ุงูุฑุณูู -->
                <div class="form-field">
                  <label class="form-label">ุงููุชุจูู ุดุงูู ุงูุฑุณูู ููู ุงููููุงุช</label>
                  <input type="number" class="form-input" [(ngModel)]="files.remainingWithFeesAll" name="remainingWithFeesAll" />
                </div>
                <div class="form-field">
                  <label class="form-label">ุงููุชุจูู ุดุงูู ุงูุฑุณูู ููุดุฑูุฉ ุงูุญุงููุฉ</label>
                  <input type="number" class="form-input" [(ngModel)]="files.remainingWithFeesCurrent" name="remainingWithFeesCurrent" />
                </div>

                <!-- ุงูุฅุฌุฑุงุกุงุช -->
                <div class="form-field">
                  <label class="form-label">ุงูุฅุฌุฑุงุกุงุช ููู ุงููููุงุช</label>
                  <input type="number" class="form-input" [(ngModel)]="files.actionsAll" name="actionsAll" />
                </div>
                <div class="form-field">
                  <label class="form-label">ุงูุฅุฌุฑุงุกุงุช ููุดุฑูุฉ ุงูุญุงููุฉ</label>
                  <input type="number" class="form-input" [(ngModel)]="files.actionsCurrent" name="actionsCurrent" />
                </div>
              </div>
            </div>
            <div *ngIf="activeSubTab === 'company-link'">
              <div class="form-grid">
                <div class="form-field form-field-full">
                  <label class="form-label">ุฑุงุจุท ุงูุดุฑูุฉ ููุฏูุน</label>
                  <input type="text" class="form-input" [(ngModel)]="companyLink" name="companyLink" placeholder="https://company-payment-link" />
                </div>
                <div class="form-field form-field-full">
                  <label class="form-label">ุณูุชู ุฅุฑุณุงู ุงูุฑุงุจุท ุนูู ุงููุงุชุณ ุนูู ุงูุฑูู ุงูุชุงูู</label>
                  <input type="text" class="form-input" [(ngModel)]="whatsAppNumber" name="whatsAppNumber" placeholder="ูุซุงู: 9665XXXXXXXX" />
                </div>
              </div>

              <!-- ุงูุฃุฒุฑุงุฑ -->
              <div class="form-actions">
                <button class="form-button form-button-primary" (click)="setOfficeLink()">ุฑุงุจุท ุงูููุชุจ</button>
                <button class="form-button form-button-secondary" (click)="setCompanyLink()">ุฑุงุจุท ุงูุดุฑูุฉ</button>
                <button class="form-button form-button-outline" (click)="copyLink()">ูุณุฎ</button>
                <button class="form-button form-button-success" (click)="sendWhatsApp()">ุฅุฑุณุงู ุฑุงุจุท ุงูุดุฑูุฉ ุจุงููุงุชุณ</button>
              </div>
            </div>
            <div *ngIf="activeSubTab === 'fees'">fees</div>
            <div *ngIf="activeSubTab === 'details'">
              <div class="table-container">
                <table class="table">
                  <thead>
                    <tr>
                      <th>ุงูุจูุงู</th>
                      <th>ุงููุจูุบ</th>
                      <th>Open</th>
                      <th>BTN</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of detailsList">
                      <td>{{ item.description }}</td>
                      <td>{{ item.amount | number }}</td>
                      <td>
                        <button class="form-button form-button-outline" style="padding: 0.25rem 0.75rem;" (click)="openItem(item)">
                          Open
                        </button>
                      </td>
                      <td>
                        <button class="form-button form-button-primary" style="padding: 0.25rem 0.75rem;" (click)="action(item)">
                          BTN
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div *ngIf="activeSubTab === 'checks'">
              <p style="color: var(--text-color-secondary);">checks</p>
            </div>
            <div *ngIf="activeSubTab === 'attachments'">
              <div class="table-container">
                <table class="table">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>ุงุณู ุงููุฑูู</th>
                      <th>ุชุงุฑูุฎ ุงูุฅุถุงูุฉ</th>
                      <th>ุงููุฑูู</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let file of attachments">
                      <td>{{ file.id }}</td>
                      <td>{{ file.name }}</td>
                      <td>{{ file.date | date: 'yyyy-MM-dd' }}</td>
                      <td>
                        <button class="form-button form-button-primary" style="padding: 0.25rem 0.75rem;" (click)="openAttachment(file)">
                          ูุชุญ
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div *ngIf="activeSubTab === 'categories'">categories</div>
       </div>

       </div>
     
     </div>
   
   
     <!-- ===================================== -->
     <!--  Middle Section: Negotiation          -->
     <!-- ===================================== -->
     <div class="grid grid-cols-12 gap-8 flex ">
       
    <div class="col-span-4 lg:col-span-3 card" style="display: inline-table;">
      <div class="card-body">
        <div class="form-grid">
          <button class="form-button form-button-primary" routerLink="/report/add-number">
            โ ุงุถุงูุฉ ูุดู
          </button>
          <button class="form-button form-button-secondary" routerLink="/report/numbers">
            ๐ ุจุญุซ ุฃุฑูุงู
          </button>
          <div class="form-field form-field-full">
            <input type="text" class="form-input" placeholder="ุงุฏุฎู ุฑูู ุงููุดู ููุจุญุซ" />
          </div>
        </div>
      </div>
    </div>
    <!-- Main Content -->
    <div class="col-span-8 lg:col-span-7">
      <div class="space-y-6" style="max-width: 70%;">
        <div class="tabs">
          <a class="tab tab-bordered"
             [class.tab-active]="activeTab === 'numbers'"
             (click)="activeTab = 'numbers'">
            ุงูุฑูู
          </a>
          <a class="tab tab-bordered"
             [class.tab-active]="activeTab === 'add'"
             (click)="activeTab = 'add'">
            ุงุถุงูุฉ ุฑูู
          </a>
        </div>

        <!-- Tab Content -->
        <div class="card">
          <div class="card-body">
            <!-- TAB (1) ุงูุฑูู -->
            <div *ngIf="activeTab === 'numbers'">
              <div class="table-container">
                <table class="table">
                  <thead>
                    <tr>
                      <th>ุงูุฑูู</th>
                      <th>ุงููุณุชุฎุฏู</th>
                      <th>ุงูุญุงูุฉ</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let row of numbers">
                      <td>{{ row.number }}</td>
                      <td>{{ row.user }}</td>
                      <td>{{ row.status }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- TAB (2) ุงุถุงูุฉ ุฑูู -->
            <div *ngIf="activeTab === 'add'" class="form-grid" style="width:fit-content">
              <div class="form-field">
                <label class="form-label">ูุณุชุฎุฏู ุงูุฑูู</label>
                <input type="text" class="form-input" [(ngModel)]="addForm.user" name="user" />
              </div>
              <div class="form-field">
                <label class="form-label">ุงููุตุฏุฑ</label>
                <input type="text" class="form-input" [(ngModel)]="addForm.source" name="source" />
              </div>
              <div class="form-actions">
                <button class="form-button form-button-primary" (click)="saveNumber()">๐พ ุญูุธ</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Negotiation Method & Review -->
  <div class="col-span-12 lg:col-span-3 card">
    <div class="card-header">
      <h3>ูุณููุฉ ุงูุชูุงูุถ</h3>
    </div>
    <div class="card-body">
      <div class="grid grid-cols-2 gap-2">
        <button *ngFor="let method of negotiationMethods"
                class="form-button form-button-outline"
                style="padding: 0.5rem; font-size: 0.875rem;"
                (click)="selectAction(method)">
          {{ method }}
        </button>
      </div>
      <div class="mt-2">
        <button class="form-button form-button-outline" style="width: 100%;">ุชุญููู ุงูุฅูุงุฏุงุช</button>
      </div>
    </div>
  </div>

  <div class="col-span-12 lg:col-span-7">
   
    
    <!-- Negotiation Outcome -->
    <div class="col-span-12 lg:col-span-4 card">
      <div class="card-header">
        <h3>ูุชูุฌุฉ ุงูุชูุงูุถ</h3>
      </div>
      <div class="card-body">
        <div class="grid grid-cols-3 md:grid-cols-4 gap-2">
          <button *ngFor="let result of negotiationResults"
                  class="form-button"
                  [class.form-button-success]="result === 'ูุนุฏ ุจุงูุณุฏุงุฏ' || result === 'ุชูุณูุท'"
                  [class.form-button-warning]="result === 'ุทูุจ ูููุฉ' || result === 'ุดููู'"
                  [class.form-button-danger]="result === 'ุฑูุถ ุงูุณุฏุงุฏ' || result === 'ุบูุฑ ูุนุชุฑู' || result === 'ุฃููุฑ ููุณู'"
                  [class.form-button-outline]="result === 'ูุฑุงุฌุนุฉ' || result === 'ูุง ููุฌุฏ ุฑูู' || result === 'ูุทููุจ ุฑูู 2' || result === 'ุฑูู ุฎุทุฃ'"
                  [class.form-button-secondary]="result === 'ูุทููุจ ุฅุฌุฑุงุก' || result === 'ุชุฃุฌูู ูุชุงุจุนุฉ' || result === 'ุฑูุน ุงูุฅุฌุฑุงุกุงุช' || result === 'ุฎุตู'"
                  style="padding: 0.5rem; font-size: 0.875rem;"
                  (click)="selectedResult = result">
            {{ result }}
          </button>
        </div>

        <div class="card mt-4" style="background: var(--surface-hover);">
          <div class="card-body">
            <h3 style="font-weight: 700; margin-bottom: 0.5rem;">ูุชูุฌุฉ ุงูุชูุงูุถ</h3>
            <div style="font-size: 0.875rem; color: var(--text-color-secondary);">
              {{ selectedAction ? 'ูุณููุฉ ุงูุชูุงูุถ: ' + selectedAction : 'ุงุฎุชุฑ ูุณููุฉ ุงูุชูุงูุถ' }}
            </div>
            <div style="font-size: 0.875rem; color: var(--text-color-secondary); margin-top: 0.25rem;">
              {{ selectedResult ? 'ูุชูุฌุฉ ุงูุชูุงูุถ: ' + selectedResult : 'ุงุฎุชุฑ ูุชูุฌุฉ ุงูุชูุงูุถ' }}
            </div>
          </div>
        </div>
      </div>
    </div>

            </div>
       </div>
   
     </div>
     
    
   
     <!-- ===================================== -->
     <!--  Bottom Section: Data Grid            -->
     <!-- ===================================== -->
     <div *ngIf="activeMainTab === 'main'"  class="card bg-base-100 shadow-md">
       <div class="card-body p-4">
         <div role="tablist" class="tabs tabs-lifted">
         
      <a role="tab" 
         class="tab"
         [class.tab-active]="activeSubTabLower === 'notes'"
         (click)="setSubActiveLower('notes')">
         ุงูููุงุญุธุงุช
      </a>

      <a role="tab" 
         class="tab"
         [class.tab-active]="activeSubTabLower === 'efada'"
         (click)="setSubActiveLower('efada')">
         ุงูุฅูุงุฏุฉ
      </a>

      <a role="tab" 
         class="tab"
         [class.tab-active]="activeSubTabLower === 'record'"
         (click)="setSubActiveLower('record')">
         ุงูุณุฌู
      </a>

      <a role="tab" 
         class="tab"
         [class.tab-active]="activeSubTabLower === 'executions'"
         (click)="setSubActiveLower('executions')">
         ุฅูุงุฏุงุช ุงูุชูููุฐ
      </a>

      <a role="tab" 
         class="tab"
         [class.tab-active]="activeSubTabLower === 'trader'"
         (click)="setSubActiveLower('trader')">
         ุฅูุงุฏุงุช ุงููุชุฏุงูู
      </a>

      <a role="tab" 
         class="tab"
         [class.tab-active]="activeSubTabLower === 'link'"
         (click)="setSubActiveLower('link')">
         ุงูุฑุงุจุท
      </a>

      <a role="tab" 
         class="tab"
         [class.tab-active]="activeSubTabLower === 'files'"
         (click)="setSubActiveLower('files')">
         ูููุงุช ุฃุฎุฑู
      </a>

      <a role="tab" 
         class="tab"
         [class.tab-active]="activeSubTabLower === 'results'"
         (click)="setSubActiveLower('results')">
         ูุชุงุฆุฌ ุงูุจุญุซ
      </a>

      <a role="tab" 
         class="tab"
         [class.tab-active]="activeSubTabLower === 'secretary'"
         (click)="setSubActiveLower('secretary')">
         ุงูุณูุฑุชุงุฑูุฉ
      </a>

      <a role="tab" 
         class="tab"
         [class.tab-active]="activeSubTabLower === 'autoNumbers'"
         (click)="setSubActiveLower('autoNumbers')">
         ุฃุฑูุงู ุขููุฉ
      </a>
    </div>
         
    <!-- ====================== CONTENT ======================= -->

  <!-- ุงูููุงุญุธุงุช -->
    <div *ngIf="activeSubTabLower === 'notes'" class="mt-4">
      <h3 class="font-bold mb-2">ุงูููุงุญุธุงุช</h3>
      <table class="table table-zebra w-full">
        <thead>
          <tr>
            <th>ุงูููุฏ</th>
            <th>ุงูุชุงุฑูุฎ</th>
            <th>ุงูููุงุญุธุงุช</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let note of notesData">
            <td>{{ note.code }}</td>
            <td>{{ note.date }}</td>
            <td>{{ note.text }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- ุงูุฅูุงุฏุฉ -->
    <div *ngIf="activeSubTabLower === 'efada'" class="mt-4">
      <h3 class="font-bold mb-2">ุงูุฅูุงุฏุฉ</h3>
      <table class="table table-zebra w-full table-sm">
        <thead>
          <tr>
            <th>Serial</th>
            <th>ุชุงุฑูุฎ ุงูุฅูุงุฏุฉ</th>
            <th>ุงูุฅูุงุฏุฉ</th>
            <th>ุชุงุฑูุฎ ุงููุฑุงุฌุนุฉ</th>
            <th>ุงูุฅุฌุฑุงุก ุงููุงุฏู</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let ef of efadaData">
            <td>{{ ef.serial }}</td>
            <td>{{ ef.efadaDate }}</td>
            <td>{{ ef.efadaText }}</td>
            <td>{{ ef.reviewDate }}</td>
            <td>{{ ef.nextAction }}</td>
          </tr>
        </tbody>
      </table>
    </div>

   <!-- ุงูุณุฌู -->
    <div *ngIf="activeSubTabLower === 'record'" class="mt-4">
      <h3 class="font-bold mb-2">ุงูุณุฌู</h3>
      <table class="table table-zebra w-full">
        <thead>
          <tr>
            <th>#</th>
            <th>ุงูุชุงุฑูุฎ</th>
            <th>ุงูุฅูุงุฏุฉ</th>
            <th>ุงููุฑุงุฌุนุฉ</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let record of recordData; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ record.date }}</td>
            <td>{{ record.efada }}</td>
            <td>{{ record.review }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- executions -->
    <div *ngIf="activeSubTabLower === 'executions'" class="mt-4">
      <h3 class="font-bold mb-2">ุชูููุฐุงุช</h3>
      <table class="table table-zebra w-full table-sm">
        <thead>
          <tr>
            <th>#</th>
            <th>ุงูุชุงุฑูุฎ</th>
            <th>ุขุฎุฑ ุฅุฌุฑุงุก</th>
            <th>ุชุงุฑูุฎ ุขุฎุฑ ุฅุฌุฑุงุก</th>
            <th>ุงูุฅุฌุฑุงุก ุงููุงุฏู</th>
            <th>ุชุงุฑูุฎ ุงูุฅุฌุฑุงุก ุงููุงุฏู</th>
            <th>ููุงู ุงูููู</th>
            <th>ููุงุญุธุงุช</th>
            <th>ุงููุณุชุฎุฏู</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let exec of executionsData; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ exec.date }}</td>
            <td>{{ exec.lastAction }}</td>
            <td>{{ exec.lastActionDate }}</td>
            <td>{{ exec.nextAction }}</td>
            <td>{{ exec.nextActionDate }}</td>
            <td>{{ exec.fileLocation }}</td>
            <td>{{ exec.notes }}</td>
            <td>{{ exec.user }}</td>
          </tr>
        </tbody>
      </table>
    </div>


   <!-- trader -->
    <div *ngIf="activeSubTabLower === 'trader'" class="mt-4">
      <h3 class="font-bold mb-2">ุฌูุณุงุช ุงููุชุฏุงูู</h3>
      <table class="table table-zebra w-full table-sm">
        <thead>
          <tr>
            <th>#</th>
            <th>ุชุงุฑูุฎ ุงูุฅูุงุฏุฉ</th>
            <th>ููุน ุงูุฌูุณุฉ</th>
            <th>ุงููุฑุงุฑ</th>
            <th>ุงูุฌูุณุฉ ุงููุงุฏูุฉ</th>
            <th>ุชูููุช ุงูุฎุจุฑุงุก</th>
            <th>ููุงุญุธุงุช ุงูุฌูุณุฉ</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let session of traderData; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ session.efadaDate }}</td>
            <td>{{ session.sessionType }}</td>
            <td>{{ session.decision }}</td>
            <td>{{ session.nextSession }}</td>
            <td>{{ session.expertsTime }}</td>
            <td>{{ session.notes }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- link-->
    <div *ngIf="activeSubTabLower === 'link'" class="mt-4">
      <h3 class="font-bold mb-2">link</h3>
      <p>ูููู</p>
    </div>

<!-- files -->
<div *ngIf="activeSubTabLower === 'files'" class="mt-4 overflow-auto">
  <h3 class="font-bold mb-2">ูููุงุช ุงูุนููู</h3>
  <table class="table table-zebra w-full table-sm">
    <thead>
      <tr>
        <th>#</th>
        <th>ุงูููุฏ</th>
        <th>ุณุจุจ ุงููุฏููููุฉ</th>
        <th>ุงููุฏูู</th>
        <th>ุญุงูุฉ ุงูููู</th>
        <th>ุงููููู</th>
        <th>ุฑูู ุงูุนูุฏ</th>
        <th>ูููุฉ ุงููุทุงูุจุฉ</th>
        <th>ุงููุฏููุน</th>
        <th>ุงููุชุจูู</th>
        <th>ุงููููู ุงููุฑุนู</th>
        <th>ุงูููุธู</th>
        <th>ุฑูู ุงูุจุงุชุด</th>
        <th>CASE_CLINT</th>
        <th>CODE_CLINT</th>
        <th>EMPLOYEE</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let file of filesData; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ file.code }}</td>
        <td>{{ file.debtReason }}</td>
        <td>{{ file.civil }}</td>
        <td>{{ file.fileStatus }}</td>
        <td>{{ file.client }}</td>
        <td>{{ file.contractNumber }}</td>
        <td>{{ file.claimAmount }}</td>
        <td>{{ file.paid }}</td>
        <td>{{ file.remaining }}</td>
        <td>{{ file.subClient }}</td>
        <td>{{ file.employee }}</td>
        <td>{{ file.batchNumber }}</td>
        <td>{{ file.caseClient }}</td>
        <td>{{ file.codeClient }}</td>
        <td>{{ file.employeeCode }}</td>
      </tr>
    </tbody>
  </table>
</div>


    <!-- results-->
    <div *ngIf="activeSubTabLower === 'results'" class="mt-4">
      <h3 class="font-bold mb-2">results</h3>
      <p>ุณูุชู ุนุฑุถ ูุชุงุฆุฌ ุงูุจุญุซ ุจุนุฏ ุงุฎุชูุงุฑ ุงูุฑููโฆ</p>
    </div>

    <!-- secretary -->
    <div *ngIf="activeSubTabLower === 'secretary'" class="mt-4">
      <h3 class="font-bold mb-2">ุณูุฑุชุงุฑูุฉ</h3>
      <table class="table table-zebra w-full table-sm">
        <thead>
          <tr>
            <th>#</th>
            <th>ุงูุชุงุฑูุฎ</th>
            <th>ุงูููุงุญุธุฉ</th>
            <th>ุงูุงุณู</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let sec of secretaryData; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ sec.date }}</td>
            <td>{{ sec.note }}</td>
            <td>{{ sec.name }}</td>
          </tr>
        </tbody>
      </table>
    </div>


    <!-- autoNumbers-->
    <div *ngIf="activeSubTabLower === 'autoNumbers'" class="mt-4">
      <h3 class="font-bold mb-2">autoNumbers</h3>
      <p>ุณูุชู ุนุฑุถ ูุชุงุฆุฌ ุงูุจุญุซ ุจุนุฏ ุงุฎุชูุงุฑ ุงูุฑููโฆ</p>
    </div>

  </div>
</div>
   

<!-- searchNumbers -->
<div *ngIf="activeMainTab === 'searchNumbers'">
 <div class="flex h-full gap-4 p-2">
      
  <!-- 1. ููุญุฉ ุงูุชุญูู ูุงูุฅุฏุฎุงู (ูููู ุงูุดุงุดุฉ) -->
  <div class="w-100 flex flex-col gap-3 shrink-0 bg-gray-50 p-3 border border-gray-300 rounded-lg shadow-md overflow-y-auto">
    
    <!-- ูุณู ุงูุฎุตู ูุงููุฏูู ูุชุงุฑูุฎ ุงูุงูุชูุงุก -->
    <div class="space-y-2 pb-3 ">
        <div class="flex items-center gap-2 text-xs">
            <label class="font-bold text-gray-700 w-12">ุงูุฎุตู :</label>
            <input type="text" [(ngModel)]="searchNumbersForm.discount" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>
        
        <div class="flex items-center gap-2 text-xs">
            <label class="font-bold text-gray-700 w-12">ุงููุฏูู :</label>
            <input type="text" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>
        
        <div class="flex items-center gap-2 text-xs">
            <label class="font-bold text-gray-700 w-24">ุชุงุฑูุฎ ุงูุชูุงุก ุงููุฏููุฉ :</label>
            <input type="date" [(ngModel)]="searchNumbersForm.civilEndDate" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>
    </div>
    
    <!-- A. ุจูุงูุงุช ุงููููู (ุงููุณู ุงูุซุงูู ูู ุงูุตูุฑุฉ) -->
    <div class="space-y-2 border-b pb-3 border-gray-300">
        <h4 class="font-bold text-gray-800 text-sm border-b border-gray-400 pb-1">ุจูุงูุงุช ุงููููู</h4>
        <div class="flex items-center gap-2 text-xs">
            <label class="font-bold text-gray-700 w-16">ุงููููู</label>
            <input type="text" [(ngModel)]="searchNumbersForm.guarantor" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>
         <div class="flex items-center gap-2 text-xs">
            <label class="font-bold text-gray-700 w-16">ุงูุบุงูุณ</label>
            <input type="text" [(ngModel)]="searchNumbersForm.fax" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>
        <div class="flex items-center gap-2 text-xs">
             <label class="font-bold text-gray-700 w-28">ุฑูู ุงูุณุฌู ุงูุชุฌุงุฑู</label>
             <input type="text" [(ngModel)]="searchNumbersForm.commercialReg" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>
        <div class="flex items-center gap-2 text-xs">
             <label class="font-bold text-gray-700 w-28">ุฑูู ูุฏูู ุงูุดุฑูุฉ</label>
             <input type="text" [(ngModel)]="searchNumbersForm.companyCivil" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>
         <div class="flex items-center gap-2 text-xs">
             <label class="font-bold text-gray-700 w-28">ููุน ุงูุนุถููุฉ</label>
             <input type="text" [(ngModel)]="searchNumbersForm.membership" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>
        <div class="flex items-center gap-2 text-xs">
             <label class="font-bold text-gray-700 w-16">ุงููุงุชู</label>
             <input type="text" [(ngModel)]="searchNumbersForm.phone" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>
        <div class="flex items-center gap-2 text-xs">
             <label class="font-bold text-gray-700 w-16">ุงูุจุฑูุฏ</label>
             <input type="text" [(ngModel)]="searchNumbersForm.email" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>
        <!-- ุดุฑูุงุก 1ุ 2ุ 3 -->
        <div class="flex items-center gap-2 text-xs">
             <label class="font-bold text-gray-700 w-16">ุดุฑูู 1</label>
             <input type="text" [(ngModel)]="searchNumbersForm.partner1" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>
        <div class="flex items-center gap-2 text-xs">
             <label class="font-bold text-gray-700 w-16">ุดุฑูู 2</label>
             <input type="text" [(ngModel)]="searchNumbersForm.partner2" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>
        <div class="flex items-center gap-2 text-xs">
             <label class="font-bold text-gray-700 w-16">ุดุฑูู 3</label>
             <input type="text" [(ngModel)]="searchNumbersForm.partner3" class="input input-xs input-bordered w-full rounded-none h-6 border-gray-400" />
        </div>

        <!-- ุฃุฒุฑุงุฑ ุงูุฅูุณู ูุงูุญูุธ (ุงูุฃุฎุถุฑ) -->
        <div class="flex justify-center gap-2 shrink-0 mt-3">
            <button class="btn btn-sm bg-green-700 hover:bg-green-800 text-white shadow-sm rounded-none h-8 min-h-0 px-6">ุฅูุณู</button>
            <button class="btn btn-sm bg-green-700 hover:bg-green-800 text-white shadow-sm rounded-none h-8 min-h-0 px-6" (click)="onSave()">ุญูุธ</button>
        </div>
    </div>
    
    <!-- B. ุจูุงูุงุช ุงูุจุญุซ ุนู ุงูุฃุฑูุงู (ุงููุณู ุงูุณููู ูู ุงูุตูุฑุฉ) -->
    <div class="space-y-2 border-t pt-3 border-gray-300">
          <label class="font-bold text-gray-700 block">ุฑูู ุงูููุงุชู</label>
          <input type="text" class="input input-xs input-bordered w-full rounded-none  h-6" />
          
          <label class="font-bold text-gray-700 block">ุงููุฏูู ููุงูู ุงูููุงุชู</label>
          <input type="text" class="input input-xs input-bordered w-full rounded-none  h-6" />

          <label class="font-bold text-gray-700 block">ุงููุณุชุฎุฏู</label>
          <select class="select select-xs select-bordered w-full rounded-none border-gray-400 h-6 min-h-0 bg-white"></select>

           <label class="font-bold text-gray-700 block">ุงููุตุฏุฑ</label>
          <select class="select select-xs select-bordered w-full rounded-none border-gray-400 h-6 min-h-0 bg-white"></select>

          <label class="font-bold text-gray-700 block">ุงูุชุตููู</label>
          <select class="select select-xs select-bordered w-full rounded-none border-gray-400 h-6 min-h-0 bg-white"></select>

          <label class="font-bold text-gray-700 block">ููุน ุงูุฎุท</label>
          <select class="select select-xs select-bordered w-full rounded-none border-gray-400 h-6 min-h-0 bg-white"></select>
          
          <label class="font-bold text-gray-700 block">ุญุงูุฉ ุงูุฑูู</label>
          <select class="select select-xs select-bordered w-full rounded-none border-gray-400 h-6 min-h-0 bg-white"></select>
    </div>
    
    <!-- C. ุฃุฒุฑุงุฑ ุงูุชุญูู ุงูุณูููุฉ -->
    <div class="flex justify-center gap-2 shrink-0 mt-3">
        <button class="btn btn-xs bg-gray-200 hover:bg-gray-300 text-gray-700 border-gray-400 shadow-sm rounded-none h-6 min-h-0 px-4">ุชุฑุงุฌุน</button>
        <button class="btn btn-xs bg-gray-200 hover:bg-gray-300 text-gray-700 border-gray-400 shadow-sm rounded-none h-6 min-h-0 px-4">ุชุนุฏูู</button>
        <button class="btn btn-xs bg-gray-200 hover:bg-gray-300 text-gray-700 border-gray-400 shadow-sm rounded-none h-6 min-h-0 px-4">ุญูุธ</button>
    </div>
  </div>

  <!-- 2. ููุทูุฉ ุงูุฌุฏูู ูุงูุฅุญุตุงุฆูุงุช (ูุณุท ูุดูุงู ุงูุดุงุดุฉ) -->
  <div class="flex-grow flex flex-col gap-2">
    
    <!-- A. ุงูุฌุฏูู ุงูุฑุฆูุณู -->
    <div class="flex-grow overflow-hidden border border-gray-300 rounded-lg shadow-sm">

        <!-- ุงูุฌุฏูู -->
        <div class="overflow-auto h-full">
            <table class="table table-xs table-pin-rows w-full border-collapse text-right whitespace-nowrap">
                <thead>
                    <tr class="bg-gray-100 text-gray-700 border-b border-gray-300 text-[10px] h-7">
                        <th class="border-r w-1/12 bg-gray-200">ุงูุฑูู</th>
                        <th class="border-r w-1/12 bg-gray-200">ุงููุฏูู</th>
                        <th class="border-r w-1/12 bg-gray-200">ุงููุณุชุฎุฏู</th>
                        <th class="border-r w-1/12 bg-gray-200">ุงูุชุตููู</th>
                        <th class="border-r w-1/12 bg-gray-200">ุงููุตุฏุฑ</th>
                        <th class="border-r w-1/12 bg-gray-200">ููุน ุงูุฎุท</th>
                        <th class="border-r w-1/12 bg-gray-200">ุชุงุฑูุฎ ุงูุฅุถุงูุฉ</th>
                        <th class="border-r w-1/12 bg-gray-200">ุญุงูุฉ ุงูุฑูู</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let row of numbersSearchResults">
                        <td class="border-r font-mono font-bold">{{ row.number }}</td>
                        <td class="border-r">{{ row.civilID }}</td>
                        <td class="border-r">{{ row.user }}</td>
                        <td class="border-r">{{ row.classification }}</td>
                        <td class="border-r">{{ row.source }}</td>
                        <td class="border-r">{{ row.type }}</td>
                        <td class="border-r">{{ row.date }}</td>
                        <td class="border-r">{{ row.status }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- B. ุงูุฌุฏุงูู ุงูุณูููุฉ (3 ููุงุฆู) -->
    <div class="flex gap-4 shrink-0 h-40">
        <!-- ุงูุฌุฏูู ุงูุฃููู -->
        <div class="w-1/2 border border-gray-300 rounded-lg overflow-hidden shadow-sm">
            <table class="table table-xs w-full text-right">
                <thead><tr class="bg-gray-100 text-gray-700"><th>ุงูุนุฏุฏ</th><th>ููุน ุงูุฎุท</th></tr></thead>
                <tbody>
                     <tr *ngFor="let row of bottomTable1"><td>{{row.count}}</td><td>{{row.type}}</td></tr>
                </tbody>
            </table>
        </div>
        <!-- ุงูุฌุฏูู ุงูุฃูุณุท -->
        <div class="w-1/2 border border-gray-300 rounded-lg overflow-hidden shadow-sm">
            <table class="table table-xs w-full text-right">
                <thead><tr class="bg-gray-100 text-gray-700"><th>ุงูุนุฏุฏ</th><th>ุงููุตุฏุฑ</th></tr></thead>
                <tbody>
                      <tr *ngFor="let row of bottomTable2"><td>{{row.count}}</td><td>{{row.source}}</td></tr>
                </tbody>
            </table>
        </div>
    </div>
  </div>

</div>

</div>

<!-- menuSearch -->
<div *ngIf="activeMainTab === 'menuSearch'" dir="rtl"
     class="p-6 rounded-lg shadow-md w-full"
     style="background-color: var(--surface-ground); border: 1px solid var(--surface-border);">

    <h3 class="text-xl font-bold mb-6" style="color: var(--text-color);">ูุงุฆูุฉ ุงูุจุญุซ</h3>

    <!-- ุงููููุฐุฌ ุงูุฑุฆูุณู -->
    <div class="grid grid-cols-2 gap-4 w-full max-w-3xl text-sm">

        <!-- ุงูุงุณู ุจุงููุงูู -->
        <div class="col-span-2 flex items-center gap-4">
            <label class="w-32 font-bold" style="color: var(--text-color);">ุงูุงุณู ุจุงููุงูู</label>
            <input type="text"
                   [(ngModel)]="menuSearchForm.fullName"
                   name="fullName"
                   class="input input-sm w-full rounded-none"
                   style="border-color: var(--surface-border); background-color: var(--surface-card); color: var(--text-color);" />
        </div>

        <!-- ุงูุงุณู - ุงูุฃุจ - ุงูุฌุฏ - ุงูุนุงุฆูุฉ -->
        <div class="col-span-2 grid grid-cols-12 gap-4 items-center">
            
            <label class="w-32 font-bold col-span-2 flex items-center" style="color: var(--text-color);">ุงูุงุณู</label>

            <input type="text" [(ngModel)]="menuSearchForm.firstName"
                   placeholder="ุงูุงุณู"
                   name="firstName"
                   class="col-span-2 input input-sm rounded-none"
                   style="border-color: var(--surface-border); background-color: var(--surface-card); color: var(--text-color);" />

            <input type="text" [(ngModel)]="menuSearchForm.middleName"
                   placeholder="ุงูุฃุจ"
                   name="middleName"
                   class="col-span-2 input input-sm rounded-none"
                   style="border-color: var(--surface-border); background-color: var(--surface-card); color: var(--text-color);" />

            <input type="text" [(ngModel)]="menuSearchForm.lastName"
                   placeholder="ุงูุฌุฏ"
                   name="lastName"
                   class="col-span-2 input input-sm rounded-none"
                   style="border-color: var(--surface-border); background-color: var(--surface-card); color: var(--text-color);" />

            <label class="font-bold col-span-2 flex items-center" style="color: var(--text-color);">ุงูุนุงุฆูุฉ</label>

            <select [(ngModel)]="menuSearchForm.familyName"
                    name="familyName"
                    class="col-span-2 select select-sm rounded-none"
                    style="border-color: var(--surface-border); background-color: var(--surface-card); color: var(--text-color);">
                <option value="" disabled selected>--- ุงุฎุชุฑ ุงูุนุงุฆูุฉ ---</option>
                <option *ngFor="let family of familyList" [value]="family">
                    {{ family }}
                </option>
            </select>
        </div>

        <!-- ุงููุฏูู + ุงูููุญุฏ -->
        <div class="col-span-2 grid grid-cols-8 gap-4 items-center">

            <label class="w-32 font-bold col-span-2" style="color: var(--text-color);">ุงููุฏูู</label>
            <input type="text" [(ngModel)]="menuSearchForm.civilId"
                   name="civilId"
                   class="col-span-2 input input-sm rounded-none"
                   style="border-color: var(--surface-border); background-color: var(--surface-card); color: var(--text-color);" />

            <label class="w-32 font-bold col-span-2" style="color: var(--text-color);">ุงูููุญุฏ</label>
            <input type="text" [(ngModel)]="menuSearchForm.unifiedNumber"
                   name="unifiedNumber"
                   class="col-span-2 input input-sm rounded-none"
                   style="border-color: var(--surface-border); background-color: var(--surface-card); color: var(--text-color);" />
        </div>

        <!-- ุงูุฑูู -->
        <div class="col-span-2 flex items-center gap-4">
            <label class="w-32 font-bold" style="color: var(--text-color);">ุงูุฑูู</label>
            <input type="text" [(ngModel)]="menuSearchForm.phone"
                   name="phone"
                   class="input input-sm w-full rounded-none"
                   style="border-color: var(--surface-border); background-color: var(--surface-card); color: var(--text-color);" />
        </div>

        <!-- ุงูุนููุงู -->
        <div class="col-span-2 flex items-center gap-4">
            <label class="w-32 font-bold" style="color: var(--text-color);">ุงูุนููุงู</label>
            <input type="text" [(ngModel)]="menuSearchForm.address"
                   name="address"
                   class="input input-sm w-full rounded-none"
                   style="border-color: var(--surface-border); background-color: var(--surface-card); color: var(--text-color);" />
        </div>

    </div>

    <!-- ุงูุฃุฒุฑุงุฑ -->
    <div class="flex gap-3 mt-6 w-full max-w-3xl">
        <button class="btn btn-sm rounded-none shadow-sm h-8 min-h-0 px-6"
                style="background-color: var(--surface-hover); color: var(--text-color); border-color: var(--surface-border);"
                (click)="searchMenu()">ุจุญุซ</button>

        <button class="btn btn-sm rounded-none shadow-sm h-8 min-h-0 px-6"
                style="background-color: var(--surface-hover); color: var(--text-color); border-color: var(--surface-border);">
            ุฅุถุงูุฉ
        </button>

        <button class="btn btn-sm rounded-none shadow-sm h-8 min-h-0 px-6"
                style="background-color: var(--surface-hover); color: var(--text-color); border-color: var(--surface-border);"
                (click)="resetMenuSearch()">ุชุฑุงุฌุน</button>
    </div>

</div>

<!--  FeesAndCollection -->
<div *ngIf="activeMainTab === 'FeesAndCollection'">
   <h2 class="text-xl font-bold"> ุงูุนูููุงุช ู ุงูุชุญุตูู</h2>
</div>

<!-- notes -->
<div *ngIf="activeMainTab === 'notes'">
   <h2 class="text-xl font-bold">ุงูููุงุญุธุงุช</h2>
</div>

<!-- preview -->
<div *ngIf="activeMainTab === 'preview'">
   <h2 class="text-xl font-bold">preview</h2>
</div>

<!-- newFiles -->
<div *ngIf="activeMainTab === 'newFiles'">
   <h2 class="text-xl font-bold">newFiles</h2>
</div>

<!-- statements -->
<div *ngIf="activeMainTab === 'statements'">
 <div class="flex flex-col h-full overflow-hidden">
    
    <!-- 1. ุดุฑูุท ุงูุจุญุซ ูุงูููุชุฑุฉ -->
    <div class="flex flex-wrap justify-between items-center p-2 rounded-lg shadow-sm shrink-0 mb-3 gap-2"
         style="background-color: var(--surface-section); border: 1px solid var(--surface-border);">
        
        <!-- ุญููู ุงูุชุงุฑูุฎ -->
        <div class="flex items-center gap-4 text-xs shrink-0">
            <div class="flex items-center gap-1">
                <label class="font-bold" style="color: var(--text-color);">ูู ุชุงุฑูุฎ</label>
                <input type="date" [(ngModel)]="fromDate" class="input input-xs input-bordered rounded-none h-6"
                       style="border-color: var(--surface-border); background-color: var(--surface-card); color: var(--text-color);" />
            </div>
            <div class="flex items-center gap-1">
                <label class="font-bold" style="color: var(--text-color);">ุงูู ุชุงุฑูุฎ</label>
                <input type="date" [(ngModel)]="toDate" class="input input-xs input-bordered rounded-none h-6"
                       style="border-color: var(--surface-border); background-color: var(--surface-card); color: var(--text-color);" />
            </div>
            
            <!-- ุฒุฑ ุงูุจุญุซ ุงูุนุงู -->
            <button class="btn btn-xs rounded-none h-6 min-h-0 px-4"
                    style="background-color: var(--surface-hover); color: var(--text-color); border-color: var(--surface-border);"
                    (click)="searchStatements()">ุจุญุซ ุนุงู</button>
        </div>

        <!-- ุฃุฒุฑุงุฑ ุงูููุชุฑุฉ ุงูุณุฑูุนุฉ -->
        <div class="flex items-center gap-2 text-xs">
            
             <button 
                class="btn btn-xs rounded-none h-6 min-h-0 px-4"
                [style.background-color]="activeFilter === 'statements' ? 'var(--primary-color)' : 'var(--surface-hover)'"
                [style.color]="activeFilter === 'statements' ? '#ffffff' : 'var(--text-color)'"
                [style.border-color]="'var(--surface-border)'"
                (click)="setFilterAndSearch('statements')">
                ุฅูุงุฏุงุช
             </button>
             
             <button 
                class="btn btn-xs rounded-none h-6 min-h-0 px-4"
                [style.background-color]="activeFilter === 'review' ? 'var(--primary-color)' : 'var(--surface-hover)'"
                [style.color]="activeFilter === 'review' ? '#ffffff' : 'var(--text-color)'"
                [style.border-color]="'var(--surface-border)'"
                (click)="setFilterAndSearch('review')">
                ูุฑุงุฌุนุฉ
             </button>

             <button 
                class="btn btn-xs rounded-none h-6 min-h-0 px-4"
                [style.background-color]="activeFilter === 'paid' ? 'var(--primary-color)' : 'var(--surface-hover)'"
                [style.color]="activeFilter === 'paid' ? '#ffffff' : 'var(--text-color)'"
                [style.border-color]="'var(--surface-border)'"
                (click)="setFilterAndSearch('paid')">
                ุงูุณุฏุงุฏ
             </button>

             <button 
                class="btn btn-xs rounded-none h-6 min-h-0 px-4"
                [style.background-color]="activeFilter === 'group_paid' ? 'var(--primary-color)' : 'var(--surface-hover)'"
                [style.color]="activeFilter === 'group_paid' ? '#ffffff' : 'var(--text-color)'"
                [style.border-color]="'var(--surface-border)'"
                (click)="setFilterAndSearch('group_paid')">
                ุณุฏุงุฏ ุงููุฌููุนุฉ
             </button>
             
             <button class="btn btn-xs rounded-none h-6 min-h-0 px-4"
                     style="background-color: var(--green-500); color: #ffffff;"
                     (click)="exportToExcel()">Excel</button>
             <button class="btn btn-xs rounded-none h-6 min-h-0"
                     style="background-color: var(--surface-hover); color: var(--text-color); border-color: var(--surface-border);">ุทุจุงุนุฉ</button>
             <button class="btn btn-xs rounded-none h-6 min-h-0"
                     style="background-color: var(--surface-hover); color: var(--text-color); border-color: var(--surface-border);">ุญุฐู ุงูุฅูุงุฏุฉ</button>
        </div>

    </div>

    <!-- 2. ุงูุฌุฏูู ุงูุฑุฆูุณู -->
    <div class="flex-grow overflow-auto rounded-lg shadow-inner"
         style="border: 1px solid var(--surface-border); background-color: var(--surface-card);">
        
        <table class="table table-xs table-pin-rows w-full border-collapse text-right whitespace-nowrap">
            <thead>
                <tr class="border-b text-[10px] h-6"
                    style="background-color: var(--surface-section); color: var(--text-color); border-color: var(--surface-border);">
                    <th class="border-r w-8" style="background-color: var(--surface-ground);">#</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ุงูุงุณู</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ุชุงุฑูุฎ ุงูุฅูุงุฏุฉ</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ุชุงุฑูุฎ ุงููุฑุงุฌุนุฉ</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ุงูุฅูุงุฏุฉ</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ุงูููุธู</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ุทุฑููุฉ ุงูุชูุงุตู</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ุญุงูุฉ ุงูุชูุงุตู</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ุญุงูุฉ ุงูุชุนุงูู</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ุงูุญุงูุฉ ุงููุฏููุฉ</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ุงูุญุงูุฉ ุงูุฏุงุฎููุฉ</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ุญุงูุฉ ุงูุฅูุฏุงุน</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ูููุฉ ุงูุฅุฌูุงูู</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ุฑูู ุงูุฅูุงุฏุฉ</th>
                    <th class="border-r" style="background-color: var(--surface-ground);">ููุงุญุธุงุช</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let row of statementRows; let i = index" class="border-b"
                    style="border-color: var(--surface-border);"
                    [style.background-color]="i % 2 === 0 ? 'var(--surface-card)' : 'var(--surface-ground)'">
                     <td class="border-r text-center">{{ i + 1 }}</td>
                     <td class="border-r font-bold" style="color: var(--primary-color);">{{row.name}}</td>
                     <td class="border-r">{{row.date}}</td>
                     <td class="border-r">{{row.reviewDate}}</td>
                     <td class="border-r truncate max-w-[150px]">{{row.efada}}</td>
                     <td class="border-r">{{row.employee}}</td>
                     <td class="border-r">{{row.contactMethod}}</td>
                     <td class="border-r">{{row.contactStatus}}</td>
                     <td class="border-r">{{row.cooperationStatus}}</td>
                     <td class="border-r">{{row.civilStatus}}</td>
                     <td class="border-r">{{row.internalStatus}}</td>
                     <td class="border-r">{{row.depositStatus}}</td>
                     <td class="border-r font-mono">{{row.totalAmount}}</td>
                     <td class="border-r font-mono">{{row.statementNumber}}</td>
                     <td class="border-r truncate max-w-[150px]">{{row.notes}}</td>
                </tr>
            </tbody>
        </table>
    </div>

</div>
</div>

<!-- searchStatements -->
<div *ngIf="activeMainTab === 'searchStatements'">
   <h2 class="text-xl font-bold">searchStatements</h2>
</div>

<!-- stats -->
<div *ngIf="activeMainTab === 'stats'">
   <h2 class="text-xl font-bold">stats</h2>
</div>

<div *ngIf="loading" class="flex justify-center my-10">
  <span class="loading loading-spinner loading-lg"></span>
</div>
<app-lookup-modal
  #lookupModal
  (itemSelected)="onLookupSelected($event)"
></app-lookup-modal>