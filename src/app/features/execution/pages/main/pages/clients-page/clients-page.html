<div class="flex flex-col gap-4">
  <!-- ๐ฃ ุงูุชุจููุจุงุช ุงููุฑุนูุฉ -->
  <app-sub-tabs
    [tabs]="subTabs"
    (tabChange)="onSubTabChange($event)"
  ></app-sub-tabs>

  <!-- ๐ฉ ูุญุชูู ุงูุตูุญุฉ (ููุฑูุงุช + ุฌุฏุงูู) -->
  <div class="flex gap-6">
    <!-- ุงูุนููุฏ ุงูุฃููู: ุงูููุฑูุงุช -->
    <div class="w-2/3 flex  gap-4">
      <!-- ุจุทุงูุฉ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ -->
      <div class="card shadow p-4" style="align-self: flex-start; background-color: var(--surface-card);">
        <h2 class="text-lg font-semibold mb-3" style="color: var(--text-color);">ุจูุงูุงุช ุงูุนููู</h2>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุงููููู</label>
            <input type="text" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [value]="client.owner" readonly />
          </div>
          <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุงูุฎุตู</label>
            <input type="text" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [value]="client.opponent" readonly />
          </div>
           <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุงููุฏูู</label>
            <input type="text" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [value]="client.civil" readonly />
          </div>
            <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุงูุญุงูุฉ</label>
            <input type="text" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [value]="client.condition" readonly />
          </div>
            <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุงูุฌูุณูุฉ</label>
            <input type="text" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [value]="client.nationality" readonly />
          </div>
           <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุงูุฑูู ุงูุงูู</label>
            <input type="text" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [value]="client.automaticNo" readonly />
          </div>
           <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุงูุนูุฏ</label>
            <input type="text" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [value]="client.contract" readonly />
          </div>
             <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุงููุฏููููุฉ</label>
            <input type="text" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [value]="client.indebtedness" readonly />
          </div>
            <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุงูููุญุฏ</label>
            <input type="text" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [value]="client.unified" readonly />
          </div>
           <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุฑูู ุงูุจุงุชุด</label>
            <input type="text" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [value]="client.patch" readonly />
          </div>
          <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุงูุนููุงู</label>
            <input type="text" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [value]="client.address" readonly />
          </div>
        </div>
      </div>

      <!-- ุงูููุฑู ุงููุชุบูุฑ ุญุณุจ ุงูุชุจููุจ -->
      <div class="card shadow p-3 w-[700px]"
           style="background-color: var(--surface-card);">
        <ng-container [ngSwitch]="selectedTab">
          <app-main-form *ngSwitchCase="'ุงูุฑุฆูุณูุฉ'"></app-main-form>
          <app-work-form *ngSwitchCase="'ุฌูุฉ ุงูุนูู'"></app-work-form>
          <app-classification-form *ngSwitchCase="'ุงูุชุตููู'"></app-classification-form>
          <app-judgment-form *ngSwitchCase="'ููุทูู ุงูุญูู'"></app-judgment-form>
          <app-address-form *ngSwitchCase="'ุงูุนููุงู'"></app-address-form>
          <app-session-form *ngSwitchCase="'ุงูุฌูุณุงุช'"></app-session-form>
          <app-claim-value *ngSwitchCase="'ูููุฉ ุงููุทุงูุจุฉ'"></app-claim-value>
          <app-attachments-form *ngSwitchCase="'ุงููุฑููุงุช'"></app-attachments-form>
        <!--  <app-fees-form *ngSwitchCase="'ุงูุฑุณูู'"></app-fees-form>
          <app-actions-form *ngSwitchCase="'ุงูุฅุฌุฑุงุกุงุช'"></app-actions-form> -->
        </ng-container>
      </div>
    </div>

    <!-- ุงูุนููุฏ ุงูุฃูุณุฑ: ุงูุฌุฏุงูู ุงูุฌุงูุจูุฉ -->
    <div class="w-1/3 flex flex-col gap-4">
      <div class="card shadow p-4"
           style="background-color: var(--surface-card);">
        <h3 class="font-semibold mb-3" style="color: var(--text-color);">ุชูุงุตูู ุงูุฑุณูู</h3>
        <div class="grid grid-cols-2 gap-3  flex flex-col">
          <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ูููุฉ ุงููุทุงูุจุฉ</label>
            <input type="number" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [(ngModel)]="fees.claimValue" />
          </div>
          <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุงูุฑุณูู</label>
            <input type="number" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [(ngModel)]="fees.feesValue" />
          </div>
          <div>
            <label class="text-sm" style="color: var(--text-color-secondary);">ุงุชุนุงุจ ุงููุญุงูุงุฉ</label>
            <input type="number" class="input input-bordered w-full"
                   style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
                   [(ngModel)]="fees.lawValue" />
          </div>
        </div>
        <div class="p-4 rounded-xl shadow mt-6"
             style="background-color: var(--surface-section);">
          <h3 class="text-lg font-semibold mb-2" style="color: var(--text-color);">๐ฐ ุงูุฑุณูู</h3>
          <table class="table table-zebra w-full"
                 style="border-color: var(--surface-border);">
            <thead>
              <tr style="background-color: var(--surface-section);">
                <th style="color: var(--text-color);">ุงูุจูุฏ</th>
                <th style="color: var(--text-color);">ุงููููุฉ</th>
              </tr>
            </thead>
            <tbody>
              <tr style="background-color: var(--surface-card); color: var(--text-color);">
                <td>ุฑุณูู ุชุณุฌูู</td>
                <td>150</td>
              </tr>
              <tr style="background-color: var(--surface-ground); color: var(--text-color);">
                <td>ุฑุณูู ูุญููุฉ</td>
                <td>300</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="mt-4 border-t pt-3 text-sm"
             style="border-color: var(--surface-border); color: var(--text-color);">
          <p>ุฅุฌูุงูู ุงููุณุฏุฏ: <span class="font-semibold">{{ totals.paid | number }}</span></p>
          <p>ุฅุฌูุงูู ุงูุชุฎููุถ: <span class="font-semibold">{{ totals.discount | number }}</span></p>
          <p>ุงููุชุจูู: <span class="font-semibold" style="color: var(--red-500);">{{ totals.remaining | number }}</span></p>
        </div>
      </div>
    </div>
  </div>

  <!-- ุงูููุฑู -->
<div class="p-3 rounded-xl shadow mt-2"
     style="background-color: var(--surface-card);">
  <h3 class="text-lg font-semibold mb-4" style="color: var(--text-color);">๐ ุจูุงูุงุช ุงูุฅุฌุฑุงุกุงุช</h3>

   <form [formGroup]="actionsForm" class="grid grid-cols-2 gap-4">
    <div>
      <label class="label font-semibold" style="color: var(--text-color);">ุขุฎุฑ ุฅุฌุฑุงุก</label>
      <input type="text" formControlName="lastAction"
             class="input input-bordered w-full"
             style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
             readonly />
    </div>

    <div>
      <label class="label font-semibold" style="color: var(--text-color);">ุชุงุฑูุฎ ุขุฎุฑ ุฅุฌุฑุงุก</label>
      <input type="date" formControlName="lastActionDate"
             class="input input-bordered w-full"
             style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);" />
    </div>

    <div>
      <label class="label font-semibold" style="color: var(--text-color);">ุงูุฅุฌุฑุงุก ุงููุงุฏู</label>
      <input type="text" formControlName="nextAction"
             class="input input-bordered w-full"
             style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"
             readonly />
    </div>

    <div>
      <label class="label font-semibold" style="color: var(--text-color);">ุชุงุฑูุฎ ุงูุฅุฌุฑุงุก ุงููุงุฏู</label>
      <input type="date" formControlName="nextActionDate"
             class="input input-bordered w-full"
             style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);" />
    </div>

    <div>
      <label class="label font-semibold" style="color: var(--text-color);">ููุงู ุงูููู</label>
      <input type="text" formControlName="fileLocation"
             class="input input-bordered w-full"
             style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);" />
    </div>

    <div>
      <label class="label font-semibold" style="color: var(--text-color);">ุฑูู ุงูููู</label>
      <input type="text" formControlName="fileNumber"
             class="input input-bordered w-full"
             style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);" />
    </div>
    <!-- textarea ููููุฎุต -->
    <div class="mt-4">
      <label class="label font-semibold" style="color: var(--text-color);">ููุฎุต ุงูุฅุฌุฑุงุกุงุช</label>
      <textarea formControlName="summary"
                class="textarea textarea-bordered w-full h-24"
                style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"></textarea>
    </div>
    <!-- textarea ููููุงุญุธุงุช -->
    <div class="mt-4">
      <label class="label font-semibold" style="color: var(--text-color);">ููุงุญุธุงุช</label>
      <textarea formControlName="notes"
                class="textarea textarea-bordered w-full h-24"
                style="border-color: var(--surface-border); background-color: var(--surface-ground); color: var(--text-color);"></textarea>
    </div>
  </form>
  <!-- ุงูุฃุฒุฑุงุฑ -->
  <div class="flex justify-center gap-4 mt-6">
    <button type="button" class="btn btn-outline" (click)="openLastActionForm()">๐ ุขุฎุฑ ุฅุฌุฑุงุก</button>
    <button type="button" class="btn btn-primary" (click)="save()">๐พ ุญูุธ ุงูุฅูุงุฏุฉ</button>
    <button type="button" class="btn btn-accent" (click)="justicePortal.open()">โ๏ธ ูุณุฎ ูู ุจูุงุจุฉ ุงูุนุฏู</button>
  </div>
</div>
<!-- ุงูุฌุฏูู ุงูุณููู ุงููุจูุฑ -->
<app-main-tabs></app-main-tabs>
</div>

  <app-last-action-modal
      #lastActionModal
      (actionSelected)="onLastActionSelected($event)"
    ></app-last-action-modal>


  <app-date-modal
    #lastDateModal
    (dateSelected)="onLastDateSelected($event)"
  ></app-date-modal>

  <app-next-action-modal
    #nextActionModal
    (actionSelected)="onNextActionSelected($event)"
  ></app-next-action-modal>

  <app-next-date-modal
    #nextDateModal
    (dateSelected)="onNextDateSelected($event)"
  ></app-next-date-modal>

  <app-justice-portal-form #justicePortal></app-justice-portal-form>
